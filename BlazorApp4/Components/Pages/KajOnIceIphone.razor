@page "/kajoniceiphone"
@rendermode InteractiveServer

@inject NavigationManager Navigation

<button @onclick="ToggleWallpaper" style="position:absolute;top:12px;right:12px;z-index:30;">
    Wissel wallpaper
</button>

<div class="iphone15pro-wallpaper">
    <KajOnIceWallpaper />
</div>

@code {
    string[] WallpaperRoutes = new[]
    {
        "/kajoniceiphone",
        "/forestwallpaper",
        "/saunawallpaper",
        "/kajwallpaper",
        "/kajspotlightwallpaper",
        "/home",
        "/weather"
    };

    void ToggleWallpaper()
    {
        var current = Navigation.Uri.ToLower();
        var baseUri = Navigation.BaseUri.ToLower();
        var relative = current.StartsWith(baseUri) ? current.Substring(baseUri.Length - 1) : current;
        int idx = Array.FindIndex(WallpaperRoutes, r => relative.StartsWith(r));
        int nextIdx = (idx + 1) % WallpaperRoutes.Length;
        Navigation.NavigateTo(WallpaperRoutes[nextIdx]);
    }
}
